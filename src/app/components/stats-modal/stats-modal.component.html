@if (isOpen) {
  <div class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Statistics</h2>
        <button class="close-button" (click)="closeModal()">
          <app-icon name="x" [size]="24"></app-icon>
        </button>
      </div>
      
      @if (stats) {
        <div class="stats-content">
          <div class="stat-row">
            <div class="stat-value">{{ stats.gamesPlayed }}</div>
            <div class="stat-label">Games Played</div>
          </div>
          
          <div class="stat-row">
            <div class="stat-value">{{ stats.currentStreak }}</div>
            <div class="stat-label">Current Streak</div>
          </div>
          
          <div class="stat-row">
            <div class="stat-value">{{ stats.maxStreak }}</div>
            <div class="stat-label">Max Streak</div>
          </div>
          
          <div class="distribution-section">
            <h3>Score Distribution</h3>
            @for (score of [0, 1, 2, 3, 4, 5]; track score) {
              <div class="distribution-item">
                <div class="distribution-label">{{ score }}/5</div>
                <div class="distribution-bar-container">
                  <div 
                    class="distribution-bar" 
                    [style.width.%]="getBarWidth(score)">
                  </div>
                </div>
                <div class="distribution-count">{{ getScoreCount(score) }}</div>
              </div>
            }
          </div>
        </div>
      }
    </div>
  </div>
}

